<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Signature validée — AllergoZymeProtect</title>

  <style>
    :root {
      --gold:#c9a227; --gold-strong:#b68f1e; --white:#ffffff;
      --gold-alpha-25:rgba(201,162,39,0.25); --gold-alpha-45:rgba(201,162,39,0.45);
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;font-family:'Segoe UI',system-ui,Arial;background:var(--white);color:var(--gold-strong)}
    .container{max-width:650px;margin:60px auto;padding:32px;border-radius:24px;border:1px solid var(--gold-alpha-45);
      box-shadow:0 20px 60px rgba(201,162,39,0.25);
      background:radial-gradient(circle at 50% 20%, rgba(201,162,39,0.12), transparent 60%), var(--white);
      animation:fadeIn 0.8s ease both;text-align:center}
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    h1{font-size:1.7rem;margin:0;text-shadow:0 0 12px rgba(201,162,39,0.45)}
    .msg{margin-top:24px;font-size:1.15rem;line-height:1.6;color:#6f540f}
    button{margin-top:32px;background:var(--gold-strong);color:#fff;border:none;padding:14px 36px;border-radius:999px;font-weight:700;cursor:pointer;font-size:1rem;
      transition:all .2s ease}
    button:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(201,162,39,0.45)}
    .pill{display:inline-block;border:1px solid var(--gold-alpha-45);border-radius:999px;padding:4px 12px;font-size:.9rem;margin:8px 4px}
  </style>
</head>

<body>
  <div class="container">
    <img src="assets/logo.png" alt="logo" style="width:72px;height:72px;margin-bottom:18px" />

    <h1>Signature enregistrée ✅</h1>

    <div id="infos" class="msg"></div>

    <button onclick="closeIt()">Fermer</button>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const sid = params.get("sid");           // id de la signature
    const restaurant = params.get("restaurant");
    const table = params.get("table");

    const now = new Date().toLocaleString('fr-FR',{hour12:false});

    let html = `
      Votre consentement allergique est validé.<br>
      <br>
      Horodatage : <strong>${now}</strong><br>
    `;

    if(table)   html += `<span class="pill">Table : ${table}</span>`;
    if(sid)     html += `<span class="pill">ID : ${sid.slice(0,8)}…</span>`;
    if(restaurant) html += `<span class="pill">Restaurant lié</span>`;

    document.getElementById("infos").innerHTML = html;

    function closeIt(){
      // tente de fermer l’onglet, sinon simple retour arrière
      window.close();
      history.back();
    }
  </script>
</body>
</html>
